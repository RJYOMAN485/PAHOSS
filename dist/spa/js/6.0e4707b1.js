(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"482d":function(a,t,e){"use strict";e.r(t);var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"q-pa-md"},[e("div",{staticClass:"row q-col-gutter-lg "},[e("div",{staticClass:"col-6 col-lg-6 col-xs-12"},[e("q-card",[e("q-card-section",{staticClass:"row items-center q-pb-none"},[e("div",{staticClass:"text-h6"},[a._v("Add Parking")]),e("q-space")],1),e("q-form",{staticClass:"q-gutter-md q-pa-lg",on:{submit:function(t){return t.preventDefault(),a.onSubmit(t)}}},[e("div",{staticClass:"q-ml-sm row q-col-gutter-md"},[e("div",{staticClass:"col-sm-6 col-xs-12"},[e("q-input",{attrs:{dense:"",color:"secondary",label:"Name",rules:[function(a){return a&&a.length>0||"Please type something"}]},model:{value:a.formData.location,callback:function(t){a.$set(a.formData,"location",t)},expression:"formData.location"}})],1),e("div",{staticClass:"col-sm-6 col-xs-12"},[e("q-input",{attrs:{dense:"",color:"secondary",label:"Postal",rules:[function(a){return a&&6==a.length||"Length should be six"}]},model:{value:a.formData.postal,callback:function(t){a.$set(a.formData,"postal",t)},expression:"formData.postal"}})],1)]),e("div",{staticClass:"q-ml-sm row q-col-gutter-md"},[e("div",{staticClass:"col-sm-6 col-xs-12"},[e("q-input",{attrs:{dense:"",color:"secondary",label:"Latitude",rules:[function(a){return a&&a>0||"Please type something"}]},model:{value:a.formData.lat,callback:function(t){a.$set(a.formData,"lat",t)},expression:"formData.lat"}})],1),e("div",{staticClass:"col-sm-6 col-xs-12"},[e("q-input",{attrs:{dense:"",color:"secondary",label:"Longitude",rules:[function(a){return a&&a>0||"Please type something"}]},model:{value:a.formData.lng,callback:function(t){a.$set(a.formData,"lng",t)},expression:"formData.lng"}})],1)]),e("q-input",{attrs:{dense:"",type:"number",color:"secondary",label:"Available space",rules:[function(a){return a&&a>0||"Please type something"}]},model:{value:a.formData.available_space,callback:function(t){a.$set(a.formData,"available_space",t)},expression:"formData.available_space"}}),e("q-select",{attrs:{options:a.options,label:"Available time"},model:{value:a.formData.available_time,callback:function(t){a.$set(a.formData,"available_time",t)},expression:"formData.available_time"}}),e("div",[e("q-btn",{staticClass:"full-width",attrs:{label:"Add",type:"submit",color:"secondary"}})],1)],1)],1)],1),e("div",{staticClass:"col-6 col-lg-6 col-xs-12"},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[a._v("Our Changing Planet")]),e("small",[a._v("Click on the map to set a marker. (Location tracked\n            automatically.)")])]),e("gmap-map",{ref:"mapRef",staticStyle:{width:"100%",height:"50vmin"},attrs:{center:a.center,zoom:16,"map-style-id":"roadmap"},on:{click:a.handleMapClick}},[e("gmap-marker",{attrs:{position:a.marker.position,clickable:!0,draggable:!0},on:{drag:a.handleMarkerDrag,click:a.panToMarker}})],1)],1)],1)])])},l=[],s=e("755e"),i={name:"GoogleMap",computed:{google:s["gmapApi"]},data(){return{marker:{position:{lat:10,lng:10}},center:{lat:10,lng:10},mapOptions:{disableDefaultUI:!0},formData:{location:"",lat:"null",lng:"null",postal:"888888",available_space:6,available_time:null},options:["Morning","Morning-Afternoon","Night"]}},mounted(){this.geolocate()},methods:{onSubmit(){this.$axios.defaults.withCredentials=!0,console.log("submitted"),this.$axios,this.$axios.post("http://pahoss.herokuapp.com/api/storeparking",this.formData).then((a=>{console.log(a.data)})).catch((a=>{console.log(a.message)}))},geolocate(){navigator.geolocation.getCurrentPosition((a=>{this.marker.position={lat:a.coords.latitude,lng:a.coords.longitude},this.getCityAndCountry(),this.panToMarker()}))},getCityAndCountry(){this.formData.lat=this.marker.position.lat,this.formData.lng=this.marker.position.lng,console.log(this.marker.position.lat);let a=`http://geocode.xyz/${this.marker.position.lat},${this.marker.position.lng} ?json=1`;this.$axios.defaults.withCredentials=!1,this.$axios.get(a).then((a=>{console.log("address",a.data),this.formData.location=a.data.city+","+a.data.region})).catch((a=>{console.log(a)}))},handleMarkerDrag(a){this.marker.position={lat:a.latLng.lat(),lng:a.latLng.lng()}},panToMarker(){this.$refs.mapRef.panTo(this.marker.position)},handleMapClick(a){this.marker.position={lat:a.latLng.lat(),lng:a.latLng.lng()},this.getCityAndCountry()}}},n=i,r=e("2877"),c=e("f09f"),m=e("a370"),d=e("2c91"),p=e("0378"),u=e("27f9"),g=e("ddd8"),h=e("9c40"),f=e("eebe"),b=e.n(f),v=Object(r["a"])(n,o,l,!1,null,null,null);t["default"]=v.exports;b()(v,"components",{QCard:c["a"],QCardSection:m["a"],QSpace:d["a"],QForm:p["a"],QInput:u["a"],QSelect:g["a"],QBtn:h["a"]})}}]);