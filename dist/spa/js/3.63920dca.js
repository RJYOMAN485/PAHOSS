(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"013f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row flex flex-center q-gutter-md custombg",staticStyle:{"min-height":"100vh"}},[a("q-card",{staticClass:"my-card q-pa-md col",staticStyle:{"max-width":"600px",border:"3px solid #26A69A"}},[a("q-card-section",{staticClass:"bg-grey-8 text-white"},[a("div",{staticClass:"text-h6 text-center"},[t._v("User Login")])]),a("q-card-section",[a("q-form",{staticClass:"q-gutter-md",on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[a("q-input",{attrs:{rules:[function(t){return t&&t.length>0||"Please type something"}],color:"purple-12",label:"Email",type:"email"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"email"}})]},proxy:!0}]),model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),a("q-input",{attrs:{rules:[function(t){return t&&t.length>0||"Please type something"}],type:"password",color:"purple-12",label:"Password"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"lock"}})]},proxy:!0}]),model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}}),a("q-btn",{staticClass:"full-width",attrs:{label:"Login",type:"submit",loading:t.loading,color:"secondary"}})],1),a("div",{staticClass:"text-green q-mt-md",staticStyle:{"max-width":"430px",display:"flex"}},[a("small",{},[a("q-icon",{attrs:{name:"info",size:"xs"}}),t._v("Already have an account ?\n          "),a("q-btn",{attrs:{size:"xs",to:"/register",flat:"",color:"blue",dense:"",label:"Register"}}),t._v("\n          page instead\n        ")],1)])],1)],1)],1)},o=[],r=a("ded3"),i=a.n(r),n=(a("5319"),a("2f62")),l={mounted(){this.getUser(),this.$axios.defaults.withCredentials=!0,this.$axios.get("user",this.formData).then((t=>{console.log("auth",t.data)})).catch((t=>{console.log("unauthorised",t.message)}))},data(){return{name:null,age:null,loading:!1,accept:!1,errors:[],formData:{email:"rj@gmail.com",password:"password",roles:"user"},error:{}}},methods:i()(i()({},Object(n["b"])("store",["loginUser"])),{},{getUser(){console.log("userDetails",this.$store.state.store.userDetails)},async submitForm(){this.$axios.defaults.withCredentials=!0,this.loading=!0,await this.$axios.get("http://127.0.0.1:8000/sanctum/csrf-cookie").then((t=>{console.log(t),this.$axios.post("http://127.0.0.1:8000/login",this.formData).then((t=>{this.loading=!1,this.loginUser(t.data),"admin"==t.data.roles?this.$router.replace("/admin"):(console.log("redirect to validate"),this.$router.replace("/dashboard")),console.log(t.data)})).catch((t=>{this.loading=!1,this.$q.notify({message:"Invalid login credentials",color:"red-4",position:"top",icon:"warning"})}))}))}})},c=l,d=(a("be02"),a("2877")),u=a("f09f"),m=a("a370"),p=a("0378"),h=a("27f9"),f=a("0016"),g=a("9c40"),b=a("eebe"),x=a.n(b),w=Object(d["a"])(c,s,o,!1,null,"e42599fe",null);e["default"]=w.exports;x()(w,"components",{QCard:u["a"],QCardSection:m["a"],QForm:p["a"],QInput:h["a"],QIcon:f["a"],QBtn:g["a"]})},be02:function(t,e,a){"use strict";a("d062")},d062:function(t,e,a){}}]);