(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"482d":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"q-pa-md"},[e("div",{staticClass:"row q-col-gutter-lg "},[e("div",{staticClass:"col-6 col-lg-6 col-xs-12"},[e("q-card",[e("q-card-section",{staticClass:"row items-center q-pb-none"},[e("div",{staticClass:"text-h6"},[t._v("Add Parking")]),e("q-space")],1),e("q-form",{staticClass:"q-gutter-md q-pa-lg",on:{submit:function(a){return a.preventDefault(),t.onSubmit(a)}}},[e("div",{staticClass:"q-ml-sm row q-col-gutter-md"},[e("div",{staticClass:"col-sm-6 col-xs-12"},[e("q-input",{attrs:{dense:"",color:"secondary",label:"Name",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.formData.location,callback:function(a){t.$set(t.formData,"location",a)},expression:"formData.location"}})],1),e("div",{staticClass:"col-sm-6 col-xs-12"},[e("q-input",{attrs:{dense:"",color:"secondary",label:"Postal",rules:[function(t){return t&&6==t.length||"Length should be six"}]},model:{value:t.formData.postal,callback:function(a){t.$set(t.formData,"postal",a)},expression:"formData.postal"}})],1)]),e("div",{staticClass:"q-ml-sm row q-col-gutter-md"},[e("div",{staticClass:"col-sm-6 col-xs-12"},[e("q-input",{attrs:{dense:"",color:"secondary",label:"Latitude",rules:[function(t){return t&&t>0||"Please type something"}]},model:{value:t.formData.lat,callback:function(a){t.$set(t.formData,"lat",a)},expression:"formData.lat"}})],1),e("div",{staticClass:"col-sm-6 col-xs-12"},[e("q-input",{attrs:{dense:"",color:"secondary",label:"Longitude",rules:[function(t){return t&&t>0||"Please type something"}]},model:{value:t.formData.lng,callback:function(a){t.$set(t.formData,"lng",a)},expression:"formData.lng"}})],1)]),e("q-input",{attrs:{dense:"",type:"number",color:"secondary",label:"Available space",rules:[function(t){return t&&t>0||"Please type something"}]},model:{value:t.formData.available_space,callback:function(a){t.$set(t.formData,"available_space",a)},expression:"formData.available_space"}}),e("q-select",{attrs:{options:t.options,label:"Available time",required:"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.formData.available_time,callback:function(a){t.$set(t.formData,"available_time",a)},expression:"formData.available_time"}}),e("div",[e("q-btn",{staticClass:"full-width",attrs:{label:"Add",type:"submit",color:"secondary"}})],1)],1)],1)],1),e("div",{staticClass:"col-6 col-lg-6 col-xs-12"},[e("q-card",[e("q-card-section",[e("small",[t._v("Click on the map to set a marker. (Location tracked\n            automatically.)")])]),e("gmap-map",{ref:"mapRef",staticStyle:{width:"100%",height:"50vmin"},attrs:{center:t.center,zoom:16,"map-style-id":"roadmap"},on:{click:t.handleMapClick}},[e("gmap-marker",{attrs:{position:t.marker.position,clickable:!0,draggable:!0},on:{drag:t.handleMarkerDrag,click:t.panToMarker}})],1)],1)],1)])])},l=[],s=e("755e"),i={name:"GoogleMap",computed:{google:s["gmapApi"]},data(){return{marker:{position:{lat:10,lng:10}},center:{lat:10,lng:10},mapOptions:{disableDefaultUI:!0},formData:{location:"",lat:"null",lng:"null",postal:"888888",available_space:6,available_time:null},options:["Morning","Morning-Afternoon","Night"]}},mounted(){this.geolocate()},methods:{onSubmit(){this.$axios.defaults.withCredentials=!0,console.log("submitted"),this.$axios,this.$axios.post("storeparking",this.formData).then((t=>{console.log(t.data),this.$q.notify({message:"Added Successful",color:"green",position:"top",icon:"thumb_up"}),this.$router.push("/parking-zones")})).catch((t=>{console.log(t.message),this.$q.notify({message:t.message,color:"red-4",position:"top",icon:"warning"})}))},geolocate(){navigator.geolocation.getCurrentPosition((t=>{this.marker.position={lat:t.coords.latitude,lng:t.coords.longitude},this.getCityAndCountry(),this.panToMarker()}))},getCityAndCountry(){this.formData.lat=this.marker.position.lat,this.formData.lng=this.marker.position.lng;let t=`http://geocode.xyz/${this.marker.position.lat},${this.marker.position.lng} ?json=1`;this.$axios.defaults.withCredentials=!1,this.$axios.get(t).then((t=>{this.formData.location=t.data.city+","+t.data.region})).catch((t=>{console.log(t)}))},handleMarkerDrag(t){this.marker.position={lat:t.latLng.lat(),lng:t.latLng.lng()}},panToMarker(){this.$refs.mapRef.panTo(this.marker.position)},handleMapClick(t){this.marker.position={lat:t.latLng.lat(),lng:t.latLng.lng()},this.getCityAndCountry()}}},n=i,r=e("2877"),c=e("f09f"),m=e("a370"),d=e("2c91"),p=e("0378"),u=e("27f9"),g=e("ddd8"),h=e("9c40"),f=e("eebe"),b=e.n(f),k=Object(r["a"])(n,o,l,!1,null,null,null);a["default"]=k.exports;b()(k,"components",{QCard:c["a"],QCardSection:m["a"],QSpace:d["a"],QForm:p["a"],QInput:u["a"],QSelect:g["a"],QBtn:h["a"]})}}]);